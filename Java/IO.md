# IO

## Java IO

### 类型

主要分两大块，字符流、字节流

### 作用

读入流从一个I\O设备获取数据读到内存中，由输出流将输入流读入到内存的数据写到另外一个I\O设备中去

### 举例

1. 键盘打字：读入流读取键盘I\O设备的数据，到内存的读过程
2. 屏幕显示打的字：输出流将内存的数据写到显示器I\O设备的写过程
3. 记事本保存所写内容：输出流将内存数据写到硬盘I\O设备的写过程

### 缓冲

主要强调使不使用缓冲，CPU的工作机制是不一样的！

这里好比CPU是一个超强搬运工，负责将内存中的数据搬到硬盘上。
1、若没有使用缓冲。CPU工作：CPU不只是搬运工，得保证货车（I\O设备）来货物（数据）的时候及时将货物（数据）搬运到指定地点（硬盘），不然老板就要开除他（详见“PS”），所以CPU就得时不时打电话问货车司机（给I\O设备发信号），来货（数据）了么，一直在操心，干不了其他的事，每次来货搬运的东西也少，超强搬运工能力完全施展不出来，效率特别低下
2、而使用了缓冲。CPU的工作：CPU职责就是搬运，CPU不必再对货来不来（I\O设备有没有传输数据）操心了，因为有了DMA（进货管理员），由DMA负责打电话告诉CPU什么时候来搬运，而DMA还不会一来货就叫超级搬运工CPU来，我们使用缓冲一般会设定一个大小（装货物的仓库的大小），当DMA看到一批一批货物来了直到仓库满了（缓冲区的数据满了），这时DMA才会打电话叫CPU来干活，超级搬运CPU花不了多少时间就能把一仓库的货物搬到指定地点，这样超强搬运工能力就体现出来了，CPU还能在其余的时间干别的事，效率特别高

## IO演进

> 下面的词条顺序是按照时间顺序产生的

### 同步阻塞IO

- 介绍

  BIO 全称Block-IO 是一种同步且阻塞的通信模式。是一个比较传统的通信方式，模式简单，使用方便。但并发处理能力低，通信耗时，依赖网速

- 适用场景

  BIO方式适用于连接数目比较小且固定的架构，这种方式对服务器资源要求比较高，并发局限于应用中，JDK1.4以前的唯一选择，但程序直观简单易理解

- 实际

  XxxStream

### 同步非阻塞IO

- Java NIO，全称 Non-Block IO 又叫 New IO，是Java SE 1.4版以后，针对网络传输效能优化的新功能。是一种非阻塞同步的通信模式。

NIO 与原来的 I/O 有同样的作用和目的, 他们之间最重要的区别是数据打包和传输的方式。原来的 I/O 以流的方式处理数据，而 NIO 以块的方式处理数据

面向流的 I/O 系统一次一个字节地处理数据。一个输入流产生一个字节的数据，一个输出流消费一个字节的数据。

面向块的 I/O 系统以块的形式处理数据。每一个操作都在一步中产生或者消费一个数据块。按块处理数据比按(流式的)字节处理数据要快得多。但是面向块的 I/O 缺少一些面向流的 I/O 所具有的优雅性和简单性

- 适用场景

  NIO方式适用于连接数目多且连接比较短（轻操作）的架构，比如聊天服务器，并发局限于应用中，编程比较复杂，JDK1.4开始支持

- 实际

  XxxChannel

### 异步非阻塞IO

- 介绍

  Java AIO，全称 Asynchronous IO，是异步非阻塞的IO。是一种非阻塞异步的通信模式

在NIO的基础上引入了新的异步通道的概念，并提供了异步文件通道和异步套接字通道的实现

- 适用场景

  AIO方式适用于连接数目多且连接比较长（重操作）的架构，比如相册服务器，充分调用OS参与并发操作，编程比较复杂，JDK7开始支持

- 实际

  AsynchronousXxxChannel 

### 解析区分

- 如何理解异步、同步，以及阻塞、非阻塞？

  拿烧开水来举例子：异步、同步等同于你人是否要一直守着；阻塞、非阻塞相当于水烧开会不会有人提醒你；异步阻塞呢？水烧开都会有人通知你，你守着干嘛...

## 参考

微信公众号文章：https://mp.weixin.qq.com/s/ptI0K79uBfQj9TF0bTINng